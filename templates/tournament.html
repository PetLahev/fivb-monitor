{% extends "base.html" %}
{% block title %}{{ tournament_name or ('Tournament ' ~ fivb_no) }} – FIVB Monitor{% endblock %}

{% block content %}
<p><a href="/">← Back</a></p>

<h2>
    {{ tournament_name or ('Tournament ' ~ fivb_no) }}
    {% if gender %}<span class="badge badge-gender">{{ gender }}</span>{% endif %}
</h2>

{% if other_fivb_no %}
  <p class="switch-gender">
    <a href="/tournament/{{ other_fivb_no }}">
      Switch to {{ 'women' if gender == 'M' else 'men' }}
    </a>
  </p>
{% endif %}

<h3>Teams</h3>

{% if last_checked %}
  <p class="last-checked">
    Last checked: {{ last_checked }}
  </p>
{% endif %}
<table class="data-table sortable" role="grid">
    <thead>
      <tr>
        <th>Team</th>
        <th style="width:80px; text-align:center;">Country</th>
        <th style="width:20px; text-align:center;"> </th>
        <th>Status</th>
        <th>Withdrawn date</th>
      </tr>
  </thead>
  <tbody id="teams">
      {% for t in teams %}
      <tr>
        <td>{{ t.display_name or (t.player1 ~ " / " ~ t.player2) }}</td>

         <!-- Country code -->
        <td style="text-align:center;">{{ t.country_code }}</td>

        <!-- Flag column -->
        <td class="flag-cell">
            {% set f = flag_url(t.country_code) %}
            {% if f %}
              <img src="{{ f }}" alt="{{ t.country_code }}" class="flag-icon">
            {% endif %}
        </td>

        <td>{{ t.current_status }}</td>
        <td>{{ t.withdrawn_at or "" }}</td>
      </tr>
      {% endfor %}
  </tbody>
</table>

<p><a href="/">← Back</a></p>
{% endblock %}
